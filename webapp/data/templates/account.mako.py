# -*- encoding:utf-8 -*-
from mako import runtime, filters, cache
UNDEFINED = runtime.UNDEFINED
__M_dict_builtin = dict
__M_locals_builtin = locals
_magic_number = 6
_modified_time = 1375813667.075514
_template_filename='/home/trupti/commit/webapp/gnukhata/templates/account.mako'
_template_uri='/account.mako'
_template_cache=cache.Cache(__name__, _modified_time)
_source_encoding='utf-8'
from webhelpers.html import escape
_exports = []


def render_body(context,**pageargs):
    context.caller_stack._push_frame()
    try:
        __M_locals = __M_dict_builtin(pageargs=pageargs)
        h = context.get('h', UNDEFINED)
        c = context.get('c', UNDEFINED)
        __M_writer = context.writer()
        # SOURCE LINE 1
        runtime._include_file(context, u'menu.mako', _template_uri)
        __M_writer(u'\n\n<script type="text/javascript" >\nvar code_value;\nvar groupname_ele;\nvar sub_groupname_ele;\nvar accountname_list;\nvar edited_account_value;\nvar Previous_opening_bal;\nvar acc_value;\nvar account_name_list;\nvar account_code_list;\nvar suggcode;\nvar account_name;\nvar acc_code;\nvar sel_search;\nvar acccode;\nvar show ;\nvar oldacc_name_ele;\n//jquery.noConflict();\n\n$(document).ready(function(){ \n\n\t$(\'#newSub_lbl\').hide();\n\t$(\'#newSub\').hide();\n\t$("#groupname").focus();\n\t\n\t//When page loads...\n\t$(".tab_content").hide(); //Hide all content\n\tshow = "')
        # SOURCE LINE 30
        __M_writer(escape(c.flagedit))
        __M_writer(u'"\n\tif(show =="e")\n\t{\n\t\t$("ul.tabs li:last").addClass("active").show(); //Activate last tab\n\t\t$(".tab_content:last").show(); //Show first tab content\n\t\t\n\t}\n\telse\n\t{\n\t\t$("ul.tabs li:first").addClass("active").show(); //Activate first tab\n\t\t$(".tab_content:first").show(); //Show first tab content\n\t\t\n\t}\n\t//On Click Event\n\t$("ul.tabs li").click(function() {\n\t\t$("ul.tabs li").removeClass("active"); //Remove any "active" class\n\t\t$(this).addClass("active"); //Add "active" class to selected tab\n\t\t$(".tab_content").hide(); //Hide all tab content\n\t\tvar activeTab = $(this).find("a").attr("href"); //Find the href attribute value to identify the active tab + content\n\t\t$(activeTab).fadeIn(); //Fade in the active ID content\n\t\t$(\'#searchacc_by\').focus();\n\t\t$(\'#groupname\').focus();\n\t\t$("#account_name").focus();\n\t\treturn false;\n\t});\n\n\tvar acccode = document.getElementById("acccode").value;\n\tif(acccode == "manually")\n\t{\n\t\t$(\'#searchacc_by\').focus();\n\t\t$(\'#account_name_lbl\').hide();\n\t\t$("#account_name").hide();\n\t\t$("#accountcode_search").hide();\n\t\t$("#accountcode_lbl").hide();\n\t\t\n\t}\n\telse\n\t{\n\t\t$("#account_name").focus();\n\t}\n\t\n\t//JSON for based on\n\t$(\'#groupname\').change(function() {\n\t\t$(\'#newSub_lbl\').hide();\n\t\t$(\'#newSub\').hide();\n\t\t$(\'#groupname\').focus();\n\t\t$("#accountcode_suggestion").value = "";\n\t\tdocument.getElementById(\'save\').disabled = false;\n  \t\tvar grp_name = $("select#groupname").val();\n\t\tvar data = \'&groupname=\' + grp_name;\n\t\tif(grp_name =="Current Asset"||grp_name =="Investment"||grp_name =="Loans(Asset)"|| grp_name == "Fixed Assets" || grp_name == "Miscellaneous Expenses(Asset)")\n\t\t{ \n\t\t\tvar acc = document.getElementById("openingbalance_lbl");\n\t\t\tacc.innerHTML = "Debit Opening Balance&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; \u20b9"\n\t\t}\n\t\telse\n\t\t{ \n\t\t\tvar acc = document.getElementById("openingbalance_lbl");\n\t\t\tacc.innerHTML = "Credit Opening Balance&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \u20b9"\n\t\t\t\n\t\t}\n\t\t$.ajax({\n\t\t\ttype: "POST",\n\t\t\turl: location.protocol+"//"+location.host+"/account/getSubGroups",\n\t\t\tdata: data,\n           \t\tdataType: "json",\n            \t\tsuccess: function(result) {\n            \t\t\n\t\t\t\tsubgrouplist = result["subgroups_list"];\n\t\t\t\thidden = document.createElement("input");\n\t\t\t\thidden.type = "hidden";\n\t\t\t\thidden.name = "has_subgroup";\n\t\t\t\thidden.value = result;\n\t\t\t\tvar frmtest = document.getElementById("account");\n\t\t\t\tfrmtest.appendChild(hidden);\n\t\t\t\tvar acc_subgroup = document.getElementById("subgroupname");\n\t\t\t\t$("#accountcode_suggestion").value =  grp_name ;\n\t\t\t\tacc_subgroup.options.length = 0;\n\t\t\t\tif (subgrouplist.length>0)\n\t\t\t\t{\t\n\t\t\t\t\tfor(var i=0;i<subgrouplist.length;i++)\n\t\t\t   \t\t{\n\t\t\t\t\t\tvar option = document.createElement("option");\n\t\t\t\t\t\toption.text = subgrouplist[i];\n\t\t\t\t\t\toption.value = subgrouplist[i];\n\t\t\t\t\t\tacc_subgroup.options.add(option);\n\t\t\t    \t\t}\n\t\t\t    \t}\n\t\t\t\tif (grp_name == "Capital")\n\t\t\t\t{\n\t\t\t\t\tdocument.getElementById("accountcode_suggestion").value = "CP";\n\t\t\t\t\tacc_value = document.getElementById("accountcode_suggestion").value ;\n\t\t\t\t}else if (grp_name == "Corpus")\n\t\t\t\t{\n\t\t\t\t\tdocument.getElementById("accountcode_suggestion").value = "CR";\n\t\t\t\t\tacc_value = document.getElementById("accountcode_suggestion").value ;\n\t\t\t\t\t\n\t\t\t\t}else if (grp_name == "Current Asset")\n\t\t\t\t{\n\t\t\t\t\tdocument.getElementById("accountcode_suggestion").value = "CA";\n\t\t\t\t\tacc_value = document.getElementById("accountcode_suggestion").value ;\n\t\t\t\t}else if (grp_name == "Current Liability")\n\t\t\t\t{\n\t\t\t\t\tdocument.getElementById("accountcode_suggestion").value = "CL";\n\t\t\t\t\tacc_value = document.getElementById("accountcode_suggestion").value ;\n\t\t\t\t}else if (grp_name == "Direct Income")\n\t\t\t\t{\n\t\t\t\t\tdocument.getElementById("accountcode_suggestion").value = "DI";\n\t\t\t\t\tacc_value = document.getElementById("accountcode_suggestion").value ;\n\t\t\t\t}else if (grp_name == "Direct Expense")\n\t\t\t\t{\n\t\t\t\t\tdocument.getElementById("accountcode_suggestion").value = "DE";\n\t\t\t\t\tacc_value = document.getElementById("accountcode_suggestion").value ;\n\t\t\t\t}else if (grp_name == "Fixed Assets")\n\t\t\t\t{\n\t\t\t\t\tdocument.getElementById("accountcode_suggestion").value = "FA";\n\t\t\t\t\tacc_value = document.getElementById("accountcode_suggestion").value ;\n\t\t\t\t}else if (grp_name == "Indirect Income")\n\t\t\t\t{\n\t\t\t\t\tdocument.getElementById("accountcode_suggestion").value = "II";\n\t\t\t\t\tacc_value = document.getElementById("accountcode_suggestion").value ;\n\t\t\t\t}else if (grp_name == "Indirect Expense")\n\t\t\t\t{\n\t\t\t\t\tdocument.getElementById("accountcode_suggestion").value = "IE";\n\t\t\t\t\tacc_value = document.getElementById("accountcode_suggestion").value ;\n\t\t\t\t}else if (grp_name == "Investment")\n\t\t\t\t{\n\t\t\t\t\tdocument.getElementById("accountcode_suggestion").value = "IV";\n\t\t\t\t\tacc_value = document.getElementById("accountcode_suggestion").value ;\n\t\t\t\t}else if (grp_name == "Loans(Asset)")\n\t\t\t\t{\n\t\t\t\t\tdocument.getElementById("accountcode_suggestion").value = "LA";\n\t\t\t\t\tacc_value = document.getElementById("accountcode_suggestion").value ;\n\t\t\t\t}\n\t\t\t\telse if (grp_name == "Reserves")\n\t\t\t\t{\n\t\t\t\t\tdocument.getElementById("accountcode_suggestion").value = "RS";\n\t\t\t\t\tacc_value = document.getElementById("accountcode_suggestion").value ;\n\t\t\t\t}\n\t\t\t\telse if (grp_name == "Miscellaneous Expenses(Asset)")\n\t\t\t\t{\n\t\t\t\t\tdocument.getElementById("accountcode_suggestion").value = "ME";\n\t\t\t\t\tacc_value = document.getElementById("accountcode_suggestion").value ;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tdocument.getElementById("accountcode_suggestion").value = "LL";\n\t\t\t\t\tacc_value = document.getElementById("accountcode_suggestion").value ;\n\t\t\t\t}\n\t\t\t\tif(grp_name == "Direct Income" || grp_name== "Direct Expense" || grp_name == "Indirect Income" ||  grp_name== "Indirect Expense")\n\t\t\t\t{\t\n\t\t\t\t\t\n\t\t\t\t   \t$("#openingbalance").hide();\n\t\t\t\t   \t$("#openingbalance_lbl").hide();\n\t\t\t\t}\n\t\t\t\telse \n\t\t\t\t{\t\n\t\t\t\t\t\n\t\t\t\t\tdocument.getElementById("openingbalance").value="0.00";\n\t\t\t\t\t$("#openingbalance").show();\n\t\t\t\t   \t$("#openingbalance_lbl").show();\n\t\t\t\t}\n\t\t\t}\t\n\t\t});\n\t});\n\tif("')
        # SOURCE LINE 195
        __M_writer(escape(c.flagnew))
        __M_writer(u'" != "n")\n\t{\n\t\tvar acc_code = document.getElementById("acc_code").value;\n\t\tif(acc_code == "manually")\n\t\t{\n\t\t\t$("#code_warning").append("Account Code <b>"+"')
        # SOURCE LINE 200
        __M_writer(escape(c.account_code))
        __M_writer(u'"+"</b>").fadeOut(15000);\n\t\t}\n\t\t\t$("#account_warning").append("Account <b>"+"')
        # SOURCE LINE 202
        __M_writer(escape(c.accountname))
        __M_writer(u'"+"</b> Added Succesfully!").fadeOut(15000);\n\t\tif("')
        # SOURCE LINE 203
        __M_writer(escape(c.newsubgroup))
        __M_writer(u'"!= "")\n\t\t{\n\t\t\t$("#subgroup_warning").append("<b> ')
        # SOURCE LINE 205
        __M_writer(escape(c.newsubgroup))
        __M_writer(u' </b>"+"New Subgroup Added Succesfully!").fadeOut(15000);\n\t\t}\n\t}\n\t\n\tdocument.getElementById("openingbalance").value="0.00";\n\tif(show =="e")\n\t{\n\t\tif(("')
        # SOURCE LINE 212
        __M_writer(escape(c.edit_bal))
        __M_writer(u'"!="')
        __M_writer(escape(c.edit_newbal))
        __M_writer(u'")&&("')
        __M_writer(escape(c.oldacc_name))
        __M_writer(u'"!="')
        __M_writer(escape(c.editmessage))
        __M_writer(u'"))\n\t\t{\n\t\t\t$("#edit_warning").append("Account <b>"+"')
        # SOURCE LINE 214
        __M_writer(escape(c.oldacc_name))
        __M_writer(u'"+"</b> has been changed to <b>"+"')
        __M_writer(escape(c.editmessage))
        __M_writer(u'").fadeOut(15000);\n\t\t\t$("#Balance_edit_warning").append("Opening Balance has been changed from <b>"+"')
        # SOURCE LINE 215
        __M_writer(escape(c.edit_bal))
        __M_writer(u'"+"</b> to <b>"+"')
        __M_writer(escape(c.edit_newbal))
        __M_writer(u'"+"</b>").fadeOut(15000);\n\t\t}else if ("')
        # SOURCE LINE 216
        __M_writer(escape(c.edit_bal))
        __M_writer(u'"!="')
        __M_writer(escape(c.edit_newbal))
        __M_writer(u'")\n\t\t{\n\t\t\t$("#Balance_edit_warning").append("Opening Balance has been changed from <b>"+"')
        # SOURCE LINE 218
        __M_writer(escape(c.edit_bal))
        __M_writer(u'"+"</b> to <b>"+"')
        __M_writer(escape(c.edit_newbal))
        __M_writer(u'"+"</b>").fadeOut(15000);\n\t\t}\n\t\telse if("')
        # SOURCE LINE 220
        __M_writer(escape(c.oldacc_name))
        __M_writer(u'"!="')
        __M_writer(escape(c.editmessage))
        __M_writer(u'")\n\t\t{\n\t\t\t$("#edit_warning").append("Account <b>"+"')
        # SOURCE LINE 222
        __M_writer(escape(c.oldacc_name))
        __M_writer(u'"+"</b> has been changed to <b>"+"')
        __M_writer(escape(c.editmessage))
        __M_writer(u'").fadeOut(15000);\n\n\t\t}else\n\t\t{\n\t\t\t$("#edit_warning").append("No Changes Made").fadeOut(15000);\n\t\t}\t\n\t}\t\t\n\t$("#clearall").click(function(){\n\n\t\t$("#account_warning").empty(); \n\t\tdocument.getElementById(\'save\').disabled = false;\n\t\tvar subgroup= document.getElementById("subgroupname");\t\t\n\t\tsubgroup.options.length =0;\n\t\t\n\t});\n\n\t$(\'#subgroupname\').change(function(){\n\t\t\n\t\tvar selected = $(this).val();\n\t\tif(selected ==\'Create New Sub-Group\')\n\t\t{\t\n\t\t\t$(\'#newSub_lbl\').show();\n\t\t\t$(\'#newSub\').show();\n\t\t\t$(\'#newSub\').focus();\n\t\t}\n\t   else\n\t\t{\t\n\t\t\t$(\'#newSub_lbl\').hide();\n\t\t\t$(\'#newSub\').hide();\n\t\t}\t\n\t});\n\t$(\'#searchacc_by\').change(function(){\n\t\t\n\t\tsel_search = $(this).val();\n\t\tif(sel_search ==\'Account Code\')\n\t\t{\t\n\t\t\t$(\'#account_name_lbl\').hide();\n\t\t\t$("#account_name").hide();\n\t\t\t$(\'#accountcode_search\').show();\n\t\t\t$("#accountcode_lbl").show();\n\t\t\t$(\'#newSub\').focus();\n\t\t}\n\t\telse \n\t\t{\t\n\t\t\t$(\'#account_name_lbl\').show();\n\t\t\t$("#account_name").show();\n\t\t\t$("#accountcode_search").hide();\n\t\t\t$("#accountcode_lbl").hide();\n\t\t\t$(\'#newSub\').hide();\n\t\t}\t\n\t});\n\n\t\n\t//Check account name exist or not on blur textfield\n\t$(\'#accountname\').blur(function(){\n\t\tvar accountname = document.getElementById(\'accountname\');\n\t\taccount_name = changeCase(accountname);\n\t\tvar acc_code = document.getElementById("acc_code").value;\n\t\tvar testurl = location.protocol+"//"+location.host+"/account/checkAccountName";\n\t\t\n\t\t$.ajax ({\n\t\t\t\n\t\t\turl:location.protocol+"//"+location.host+"/account/checkAccountName",\n\t\t\tdata: {"accountname":account_name,"codeflag":acc_code,"groupnamechars":document.getElementById("accountcode_suggestion").value},\n\t\t\tdataType: \'json\',\n\t\t\ttype: \'post\',\n\t\t\tsuccess: function(result){\n\n\t\t\t\n\t\t\t\tif (result["exists"] == 1)\n\t\t\t\t{\n\t\t\t\t\talert("the account you are trying to create already exists");\n\t\t\t\t\taccountname.value = "";\n\t\t\t\t\taccountname.focus();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(acc_code == "manually")\n\t\t\t\t{\n\t\t\t\t\tdocument.getElementById("suggest_acc_code").value = result["suggestedcode"];\n\t\t\t\t\tcode_value = result["suggestedcode"];\n\t\t\t\t}\n\t\t\t}\n\t\t}); //close ajax\n\t}); //close blur\n\n\t//Check subgroup name exist or not on blur textfield\n\t$(\'#newSub\').blur(function(){\n\t\t\t\n\t\tvar sub_groupname = document.getElementById(\'newSub\');\n\t\tNewsub_name = changeCase(sub_groupname);\n\t\t$.ajax ({\n\t\t\turl:location.protocol+"//"+location.host+"/account/checkSubGroupName",\n\t\t\tdata: {\'newSub\':Newsub_name},// pass a single text box value?\n\t\t\tdataType: \'json\',\n\t\t\ttype: \'post\',\n\t\t\tsuccess: function(result){\n\t\t\t\tif(result["exists"] == 1 )\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t$("#subgroup_warning").append("Subgroup Name <b>" +Newsub_name+ "</b> Already Exists!!"); \n\t\t\t\t\t\t\tsub_groupname.value ="";\n\t\t\t\t\t\t\tsub_groupname.focus();\n\t\t\t\t\t\t}\n\t\t\t}\t\n\t\t}); //close ajax\n\t}); //close blur\n\n\t//Check accountcode exist or not on blur textfield\n\t$(\'#suggest_acc_code\').blur(function(){\n\n\t\tvar sugg_code_ele = document.getElementById("suggest_acc_code");\n\t\tvar exist = sugg_code_ele.value;\n\t\t$.ajax ({\n\t\t\t\n\t\t\turl:location.protocol+"//"+location.host+"/account/getAccountCodeListByCode",\n\t\t\tdata: {"suggest_acc_code":exist},// pass a single text box value?\n\t\t\tdataType: \'json\',\n\t\t\ttype: \'post\',\n\t\t\tsuccess: function(result){\n\t\t\tvar code_exist_list = result["list_of_code"];\n\t\t\tif(code_exist_list.length>0)\n\t\t\t{\t\n\t\t\t\tfor(var i=0;i<code_exist_list.length;i++)\n\t\t   \t\t{\n\t\t\t\t\tif(code_exist_list[i] == exist)\n\t\t\t\t\t{\n\t\t\t\t\t\t$("#existcode_warning").append("Account Code <b>" +exist+ "</b> Already Exists!!"); \n\t\t\t\t\t\tsugg_code_ele.value = "";\n\t\t\t\t\t\tsugg_code_ele.focus();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}); //close ajax\n\t}); //close blur\n\t\n\t$("#search").click(function(){\n\t\t\t\t\n\t\tacccode = $("input#acccode").val();\n\t\tvar acc_sel = document.getElementById(\'account_name\');\n\t\tvar acc_search = acc_sel.options[acc_sel.selectedIndex];\n\t\tvar msg = acc_search;\n\t\tif (sel_search == "Account Code")\n\t\t{\n\t\t\tvar code_sel = document.getElementById(\'accountcode_search\');\n\t\t\tvar msg = code_sel;\n\t\t\t\n\t\t}\n\t\tif(sel_search == "Account Name"){\n\t\t        if (acc_search.value == "Please Choose Account Name")\n\t\t        {\n\t\t\t        alert("Please Choose Account Name");\n\t\t\t        return false;\n\t\t        }\n\t        }\n\t\tif(notEmpty(msg,"Sorry!! No Match Found"))\n\t\t{\n\t\t\t\n\t\t\tvar table = document.getElementById("acc_table");\n\t\t\tvar rowCount = table.rows.length;\n\t\t\tfor(var i=1; i<rowCount; i++) \n\t\t\t{\n\t\t\t\ttable.deleteRow(i);\t\n\t\t\t\trowCount--;\n\t\t\t\ti--;\t\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\t$.ajax({\n\t\t\t\ttype: "POST",\n\t\t\t\turl: location.protocol+"//"+location.host+"/account/getAccountsBySearch",\n\t\t\t\tdata: {"accountname":acc_search.value,"acccode":$("input#acccode").val(),"searchacc_by":$("select#searchacc_by").val(),"accountcode":$("input#accountcode_search").val()},\n\t\t\t\tdataType: "json",\n\t\t\t\tsuccess: function(result) {\n\t\t\t\tif (sel_search =="Account Code")\n\t\t\t\t{\n\t\t\t\t\tdocument.getElementById("accountcode_search").value = ""\n\t\t\t\t}\n\t\t\t\tvar search_result = result["acclist"];\n\t\t\t\tvar tflag = result["transactionFlag"];\n\t\t\t\tvar obflag = result["openingBalanceFlag"];\n\t\t\t\t\n\t\t\t\tif (search_result == " ")\n\t\t\t\t{\n\t\t\t\t\tif (sel_search =="Account Code")\n\t\t\t\t\t{\n\t\t\t\t\tcode_sel.focus();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\t\n\t\t\t\t\tvar tableID = document.getElementById("acc_table");\n\t\t\t\t\tvar rowCount = tableID.rows.length;\n\t\t\t\t\tvar count = 1;\n\t\t\t\t\tvar row = tableID.insertRow(rowCount);\n\t\t\t\t\t\tfor (var i=0;i<search_result.length;)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tvar cell1 = row.insertCell(0);\n\t\t\t\t\t\t\tcell1.innerHTML = search_result[i];\n\t\t\t\t\t\t\tcell1.setAttribute("align","center");\n\t\t\t\t\t\t\tvar cell2 = row.insertCell(1);\n\t\t\t\t\t\t\tcell2.innerHTML = search_result[i+1];\n\t\t\t\t\t\t\tcell2.setAttribute("align","center");\n\t\t\t\t\t\t\tvar cell3 = row.insertCell(2);\n\t\t\t\t\t\t\tcell3.innerHTML = search_result[i+2];\n\t\t\t\t\t\t\tcell3.setAttribute("align","center");\n\t\t\t\t\t\t\tvar cell4 = row.insertCell(3);\n\t\t\t\t\t\t\tcell4.innerHTML = search_result[i+3];\n\t\t\t\t\t\t\tcell4.setAttribute("align","center");\n\t\t\t\t\t\t\tgroupname_ele = document.getElementById("group_name");\n\t\t\t\t\t\t\tgroupname_ele.value = search_result[i+1];\n\t\t\t\t\t\t\tsub_groupname_ele = document.getElementById("subgroup_name");\n\t\t\t\t\t\t\tsub_groupname_ele.value = search_result[i+2];\n\t\t\t\t\t\t\toldacc_name_ele = document.getElementById("oldacc_name");\n\t\t\t\t\t\t\toldacc_name_ele.value = search_result[i+3];\n\t\t\t\t\t\t\tvar account_code_ele = document.getElementById("account_code");\n\t\t\t\t\t\t\taccount_code_ele.value = search_result[i];\n\t\t\t\t\t\t\tvar balance_ele = document.getElementById("Openingbalance");\n\t\t\t\t\t\t\tbalance_ele.value = search_result[i+4];\n\t\t\t\t\t\t\tPrevious_opening_bal = balance_ele.value;\n\t\t\t\t\t\t\tvar cell6 = row.insertCell(4);\n\t\t\t\t\t\t\tcell6.innerHTML = search_result[i+4];\n\t\t\t\t\t\t\tcell6.setAttribute("align","center");\n\t\t\t\t\t\t\tvar cell5 = row.insertCell(5);\n\t\t\t\t\t\t\tvar element = document.createElement("input");\n\t\t\t\t\t\t\telement.type = "button";\n\t\t\t\t\t\t\telement.value = "Edit";\n\t\t\t\t\t\t\telement.id = "search_account";\n\t\t\t\t\t\t\telement.name = search_result[i+3];\n\t\t\t\t\t\t\tcell5.setAttribute("align","center");\t\n\t\t\t\t\t\t\tcell5.appendChild(element);\n\t\t\t\t\t\t\tdocument.getElementById("search_account").focus();\n                                                        element.setAttribute(\'onkeyup\',"keyup(event,\'search\')");\n\t\t\t\t\t\t\telement.setAttribute(\'onclick\', \'edit_account(this)\');\n\t\t\t\t\t\t\ti=i+7;\n\t\t\t\t\t\t\tcount=count+1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (acc_sel.value == "P&L" || acc_sel.value == "Income&Expenditure")\n\t\t\t\t                         {\n\t\t\t\t                                document.getElementById("Delete").disabled = true;\n\t\t\t\t                         }\n\t\t\t\t\telse if(tflag == false && obflag == false )\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdocument.getElementById("Delete").disabled = false;\t\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\telse\n\t\t\t\t\t\tdocument.getElementById("Delete").disabled = true;\n\t\t\t\t}\n       \t\t\t});\n\t\t}\n\t\n\t});\n\t\n\t$(\'#Delete\').click(function(){\n\t//alert("We r in delete account");\n\tvar acc_sel = document.getElementById(\'account_name\').value;\n\talert("Do you really want to delete " + acc_sel + "?");\n\tvar data1 = \'accountname=\' + acc_sel;\n\t\t\t\n\tvar newList = []\n\t$.ajax({\n\t\t\t\ttype: "POST",\n\t\t\t\turl: location.protocol+"//"+location.host+"/account/deleteAccount",\n\t\t\t\tdata: data1,\n\t\t\t\tdataType: "json",\n\t\t\t\tsuccess: function(result) {\n\t\t\t\tvar search_result = result["list_of_accounts"];\n\t\t\t\t\n\t\t\t\t$("#account_name").empty();\n\t\t\t\t\n\t\t\t\tvar table = document.getElementById("acc_table");\n\t\t\t\tvar rowCount = table.rows.length;\n\t\t\t\tfor(var i=1; i<rowCount; i++) \n\t\t\t\t{\n\t\t\t\t\ttable.deleteRow(i);\t\n\t\t\t\t\trowCount--;\n\t\t\t\t\ti--;\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tfor (var i=0;i<search_result.length;i++) \n\t\t\t\t{\n\t\t\t\tvar accname = document.getElementById("account_name");\n\t\t\t\tvar option = new Option(search_result[i],search_result[i]);\n\t\t\t\taccname.options[i] = option;\n\t\t\t\t\n\t\t\t\t}\t\n\t\t\t\t\n\t\t\t\t\talert("Your account has been deleted");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t});\n\t\t\t\n\t\n\t\t\t\t\n\t});\n\n\n\t$(\'#accountname\').focus(function(){\n\t\tdocument.getElementById("suggest_acc_code").value = "";\t\n\n\t});\n\t\n\treturn false;\t\n});\n\n\tfunction ExistingAccount(callback){\n\t\tvar edited_account_value = document.getElementById("new_account").value;\n\t\t $.ajax({\n\t\t\t  // ...\n\t\t\turl:location.protocol+"//"+location.host+"/account/checkAccountName",\n\t\t\tdata: {\'accountname\':edited_account_value},// pass a single text box value?cd \n\t\t\tdataType: \'json\',\n\t\t\ttype: \'post\',\n\t\t\tasync: false, //I have to use true here\n\t\t\tsuccess: function(result) {\n\t\t\tcallback(result); //callback handle server response\n\t\t\t},\n\n\t\t });\n\t };\n\tfunction existingaccount(callback1){\n\t\tvar accountname = document.getElementById(\'accountname\');\n\t\taccount_name = document.getElementById("accountname").value;\n    \t\t\t $.ajax({\n     \t\t\t\t  // ...\n\t\t\t\turl:location.protocol+"//"+location.host+"/account/getAccountNameListByName",\n\t\t\t\tdata: {\'accountname\':account_name},// pass a single text box value?\n\t\t\t\tdataType: \'json\',\n\t\t\t\ttype: \'post\',\n      \t\t\t\tasync: false, //I have to use false here,to stop asynchronization\n      \t\t\t\tsuccess: function(result) {\n        \t\t\tcallback1(result); //callback handle server response\n       \t\t\t\t},\n\n    \t\t\t });\n \t\t };\n\n\tfunction code_existing(callbackcode){\n\t\t\tvar sugg_code_ele = document.getElementById("suggest_acc_code");\n\t\t\texist = sugg_code_ele.value;\n    \t\t\t $.ajax({\n     \t\t\t\t  // ...\n\t\t\t\turl:location.protocol+"//"+location.host+"/account/getAccountCodeListByCode",\n\t\t\t\tdata: {"suggest_acc_code":exist},// pass a single text box value?\n\t\t\t\tdataType: \'json\',\n\t\t\t\ttype: \'post\',\n      \t\t\t\tasync: false, //I have to use false here,to stop asynchronization\n      \t\t\t\tsuccess: function(result) {\n\t\t\t\tcallbackcode(result); //callback handle server response\n       \t\t\t\t},\n\n    \t\t\t });\n \t\t };\n\n\t\nfunction Empty(elem)\n\t{\n\t\tif(elem.value.length == 0)\n\t\t{\t\n\t\t\treturn true;\n\t\t}\n\t}\n\tfunction isNumeric(elem, helperMsg)\n\t{\n\t\tvar numericExpression = /^[0-9 . -]+$/;\n\t\tif(elem.value.match(numericExpression))\n\t\t{\t\n\t\t\treturn true;\n\t\t}\n\t\telse\n\t\t{\n\t\t\talert(helperMsg);\n\t\t\telem.focus();\n\t\t\telem.value= "";\n\t\t\tdocument.getElementById(\'openingbalance\').value = "0.00";\n\t\t\tdocument.getElementById(\'save\').disabled = false;\n\t\t\tdocument.getElementById(\'new_openingbalance\').value = "0.00";\n\t\t\treturn false;\n\t\t}\n\t}\n\tfunction isAlphabet(elem, helperMsg)\n\t{\n\t\tvar alphaExp = /^[a-zA-Z ]+$/;\n\t\tif(elem.value.match(alphaExp))\n\t\t{\t\n\t\t\treturn true;\n\t\t}\n\t\telse\n\t\t{\n\t\t\talert(helperMsg);\n\t\t\telem.focus();\n\t\t\telem.value= "";\n\t\t\tdocument.getElementById(\'save\').disabled = false;\n\t\t\treturn false;\n\t\t}\n\t}\n\tfunction isAlphanumeric(elem, helperMsg)\n\t{\n\t\tvar alphaExp = /^[0-9a-zA-Z _   @ * , \' . / ! -]+$/;\n\t\tif(elem.value.match(alphaExp))\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t\telse\n\t\t{\n\t\t\talert(helperMsg);\n\t\t\telem.focus();\n\t\t\telem.value= "";\n\t\t\tdocument.getElementById("openingbalance").value="0.00";\n\t\t\tdocument.getElementById(\'save\').disabled = false;\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\tfunction notEmpty(elem, helperMsg)\n\t{\n\t\tif(elem.value.length == 0 )\n\t\t{\n\t\t\talert(helperMsg);\n\t\t\telem.focus(); // set the focus to this input\n\t\t\telem.value= "";\n\t\t\tdocument.getElementById("openingbalance").value="0.00";\n\t\t\treturn false;\n\t\t}\n\t\telse \n\t\t{\t\n\t\t\treturn true;\n\t\t}\n\t}\n\tfunction code_account(elem)\n\t{\n\t\n\t\tvar alphaExp = /^[0-9a-zA-Z]+$/;\n\t\tif(elem.value.match(alphaExp))\n\t\t{\t\n\t\t\treturn true;\n\t\t}\n\t\telse\n\t\t{\n\t\t\t\n\t\t\telem.value =code_value;\n\t\t\tdocument.getElementById(\'save\').disabled = false;\n\t\t\telem.focus();\n\t\t\treturn false;\n\t\t}\n\t}\n\tfunction madeSelection(elem, helperMsg)\n\t{\n\t\tif(elem.value == " " || elem.value == "Please Choose Group Name" ||elem.value == "Please Choose Sub-Group Name")\n\t\t{\n\t\t\talert(helperMsg);\n\t\t\telem.focus();\n\t\t\telem.value= "";\n\t\t\tdocument.getElementById(\'save\').disabled = false;\n\t\t\treturn false;\n\t\t}\n\t\telse\n\t\t{\t\n\t\t\treturn true;\n\t\t}\n\t}\n\tfunction validate(account)//Now let\'s validate the form.\n\t{\t\n\t\tvar groupname = document.getElementById(\'groupname\');\n\t\tvar subgroupname = document.getElementById(\'subgroupname\');\n\t\tvar sub_groupname = document.getElementById(\'newSub\');\n\t\tvar accountname = document.getElementById(\'accountname\');\n\t\tvar openingbalance = document.getElementById(\'openingbalance\');\n\t\tvar newsub_group = document.getElementById("newSub_lbl");\n\t\tvar acc_code = document.getElementById("acc_code").value;\n\t\t\n\n\t\tif(acc_code == "manually")\n\t\t{\n\t\t\tcode_existing(function(result){\n\t\t\t\t\t account_code_list =result["list_of_code"];\n\t\t\n\t\t\t\t});\n\t\t}\n\t\tif(madeSelection(groupname,"Please Choose Group Name"))\n\t\t{\n\t\t\tif(madeSelection(subgroupname, "Please Choose Sub-Group Name"))\n\t\t\t{  \t\n\t\t\t\tif(newsub_group.disabled == false)\n\t\t\t\t{\n\t\t\t\t\tif(notEmpty(sub_groupname,"Please Enter Proper Sub-Group Name"))\n\t\t\t\t\t{\n\t\t\t\t\t\tif(notEmpty(accountname, "Please Enter Proper Account Name"))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (account_name_list!= " ")\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfor(var i=0;i<account_name_list.length;i++)\n\t\t\t\t\t\t   \t\t{\n\t\t\t\t\t\t\t\t\tif(account_name_list[i] == account_name)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t$("#acc_warning").append("Account Name <b>"+account_name+"</b> Already Exists!!"); \n\t\t\t\t\t\t\t\t\t\tdocument.getElementById(\'save\').disabled = false;\n\t\t\t\t\t\t\t\t\t\taccountname.value ="";\n\t\t\t\t\t\t\t\t\t\taccountname.focus();\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(acc_code == "manually")\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvar sugg_code_ele = document.getElementById("suggest_acc_code");\n\t\t\t\t\t\t\t\tif(code_account(sugg_code_ele))\n\t\t\t\t\t\t\t\t{\t\n\t\t\t\t\t\t\t\t\tif (account_code_list!= " ")\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tfor(var i=0;i<account_code_list.length;i++)\n\t\t\t\t\t\t\t\t   \t\t{\n\t\t\t\t\t\t\t\t\t\t\tif(account_code_list[i] == code_value)\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t$("#existcode_warning").append("Account Code <b>" +code_value+ "</b> Already Exists!!");\n\t\t\t\t\t\t\t\t\t\t\t\tdocument.getElementById(\'save\').disabled = false;\n\t\t\t\t\t\t\t\t\t\t\t\tdocument.getElementById("suggest_acc_code").value=code_value;\n\t\t\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif(openingbalance.disabled == true)\n\t\t\t\t\t\t\t\t\t{\t\n\t\t\t\t\t\t\t\t\t\tif (Empty(openingbalance))\n\t\t\t\t\t\t\t\t\t\treturn true;\t\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse if(openingbalance.disabled == false)\n\t\t\t\t\t\t\t\t\t{\t\n\t\t\t\t\t\t\t\t\t\tif (isNumeric(openingbalance, "please Enter Correct Opening Balance"))\n\t\t\t\t\t\t\t\t  \t\treturn true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(acc_code == "automatic")\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif(openingbalance.disabled == true)\n\t\t\t\t\t\t\t\t{\t\n\t\t\t\t\t\t\t\t\tif (Empty(openingbalance))\n\t\t\t\t\t\t\t\t\treturn true;\t\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if(openingbalance.disabled == false)\n\t\t\t\t\t\t\t\t{\t\n\t\t\t\t\t\t\t\t\tif (isNumeric(openingbalance, "Please Enter Correct Opening Balance"))\n\t\t\t\t\t\t\t  \t\treturn true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} \n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if(notEmpty(accountname, "Please Enter Proper Account Name"))\n\t\t\t\t{\t\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tif (acc_code == "manually")\n\t\t\t\t\t{\n\t\t\t\t\t\tvar sugg_code_ele = document.getElementById("suggest_acc_code");\n\t\t\t\t\t\tif(code_account(sugg_code_ele))\n\t\t\t\t\t\t{\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (account_code_list!= " ")\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfor(var i=0;i<account_code_list.length;i++)\n\t\t\t\t\t\t   \t\t{\n\t\t\t\t\t\t\t\t\tif(account_code_list[i] == code_value)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t$("#existcode_warning").append("Account Code <b>" +code_value+ "</b> Already Exists!!");\n\t\t\t\t\t\t\t\t\t\tdocument.getElementById(\'save\').disabled = false;\n\t\t\t\t\t\t\t\t\t\tdocument.getElementById("suggest_acc_code").value=code_value;\n\t\t\t\t\t\t\t\t\t\tsugg_code_ele.focus();\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t\t\tif(openingbalance.disabled == true)\n\t\t\t\t\t\t\t{\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (Empty(openingbalance))\n\t\t\t\t\t\t\t\treturn true;\t\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse \n\t\t\t\t\t\t\tif(openingbalance.disabled == false)\n\t\t\t\t\t\t\t{\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (isNumeric(openingbalance, "Please Enter Correct Opening Balance"))\n\t\t\t\t\t\t  \t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\tif(openingbalance.disabled == true)\n\t\t\t\t\t{\t\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (Empty(openingbalance))\n\t\t\t\t\t\treturn true;\t\n\t\t\t\t\t}\n\t\t\t\t\telse if(openingbalance.disabled == false)\n\t\t\t\t\t{\t\n\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (isNumeric(openingbalance, "Please Enter Correct Opening Balance"))\n\t\t\t\t  \t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t} \n\t\t\t}\n\t\t}\n\treturn false;\n\t} //End Of Validation Function\n\tfunction ExistingAccount(callback){\n\t\tvar edited_account_value = document.getElementById("new_account").value;\n\t\t//alert(edited_account_value);\n\t\t $.ajax({\n\t\t\t  // ...\n\t\t\turl:location.protocol+"//"+location.host+"/account/getAccountNameListByName",\n\t\t\tdata: {\'accountname\':edited_account_value},// pass a single text box value?cd \n\t\t\tdataType: \'json\',\n\t\t\ttype: \'post\',\n\t\t\tasync: false, //I have to use true here\n\t\t\tsuccess: function(result) {\n\t\t\tcallback(result); //callback handle server response\n\t\t\t},\n\n\t\t });\n\t };\n\tfunction Validate_Account_Edit()\n\t{\n\t\t//Now let\'s validate the form.\n\t\taccount= document.getElementById("search_account").name;\n\t\tvar edited_account_name= document.getElementById("new_account");\n\t\tedited_account_value= document.getElementById("new_account").value;\n\t\tvar edited_opening_value= document.getElementById("new_openingbalance").value;\n\t\tvar edited_opening_name= document.getElementById("new_openingbalance")\n\t\tvar opening_ele = document.getElementById("openingbalance");\n\t\tvar balance_ele = document.getElementById("Balance");\n\t\t\n\t\t\n\t\tExistingAccount(function(result){\n\n       \t\t accountname_list = result["list_of_accounts"];\n\t\t\t\t\n  \t\t});\n\t\t\t\n\t\t\tif(notEmpty(edited_account_name,"Please enter Account Name"))\n\t\t\t{\n\t\t\t\tif(isNumeric(edited_opening_name,"Please enter Opening Balance or Zero"))\n\t\t\t\t{\t\n\t\t\t\t\tif (accountname_list!= " ")\n\t\t\t\t\t{\n\t\t\t\t\t\tif(accountname_list == edited_account_value)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (edited_account_value == account)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t$("#new_acc_warning").append(" Account Name <b>" +edited_account_value+ "</b> Already Exists!!"); \n\t\t\t\t\t\t\t\tedited_account_name.value ="";\n\t\t\t\t\t\t\t\tedited_account_name.focus();\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\t\n\t\t\n\t\t\n\t\t\treturn false;\n\t} //End Of Validation Function\n\n\nString.prototype.capitalize = function(){\n   return this.replace( /(^|\\s)([a-z])/g , function(m,p1,p2){ return p1+p2.toUpperCase(); } );\n  };\n\n\n\nfunction change_case()\n{\t\n\tvar accnam = document.getElementById(\'accountname\').value\n\tvar subnam = document.getElementById(\'newSub\').value\n\tdocument.getElementById(\'accountname\').value = accnam.capitalize();\n\tdocument.getElementById(\'newSub\').value = subnam.capitalize();\n\tvar accview = document.getElementById(\'account_name\').value\n\tdocument.getElementById(\'account_name\').value = accview.capitalize();\n\tnew_accnam = document.getElementById(\'new_account\').value\n\tdocument.getElementById(\'new_account\').value = new_accnam.capitalize();\n\t Empty_Span();\n}\n//<![CDATA[\nvar acc_name;\nfunction edit_account(acc_name)\n{\t\n\tacc_name.disabled=true;\n\tvar data = \'&account_name=\' + acc_name.name;\n\tvar tableID = document.getElementById("acc_table");\n\tvar rowCount = tableID.rows.length;\n\tvar row = tableID.rows[1];\n\tvar account_cell = row.cells[3];\n\tvar opening_cell = row.cells[4];\n\tvar input_account_text = document.createElement("input");\n\tinput_account_text.type = "text";\t\n\tinput_account_text.name = "accountname";\n\tinput_account_text.id = "new_account";\n\tinput_account_text.value = acc_name.name;\n\taccount_cell.innerHTML = "";\n\taccount_cell.appendChild(input_account_text);\t\n\tdocument.getElementById("new_account").focus();\n\tinput_account_text.setAttribute(\'onkeyup\', \'change_case()\');\n        input_account_text.setAttribute(\'onkeydown\',"keydowns(event,\'new_openingbalance\')");\n    \n      \n\tif (groupname_ele.value == "Direct Income" || groupname_ele.value == "Direct Expense" ||groupname_ele.value == "Indirect Income" ||groupname_ele.value == "Indirect Expense")\n\t{\t\n\t\tvar input_opening_text = document.createElement("input");\n\t\tinput_opening_text.type = "text";\t\n\t\tinput_opening_text.name = "openingbalance";\n\t\tinput_opening_text.id = "new_openingbalance";\n\t\tinput_opening_text.value = opening_cell.innerHTML;\n\t\tinput_opening_text.disabled = true;\n\t\topening_cell.innerHTML = "";\n\t\topening_cell.appendChild(input_opening_text);\n\t\t\t\n\t}\n\telse\n\t{\n\t\tvar input_opening_text = document.createElement("input");\n\t\tinput_opening_text.type = "text";\t\n\t\tinput_opening_text.name = "openingbalance";\n\t\tinput_opening_text.id = "new_openingbalance";\n                input_opening_text.setAttribute(\'onkeyup\',"keyup(event,\'new_account\')");\n                input_opening_text.setAttribute(\'onfocus\',"SelectAll(\'new_openingbalance\');");\n\t\tinput_opening_text.value = opening_cell.innerHTML;\n\t\tinput_opening_text.disabled = false;\n\t\tinput_opening_text.setAttribute(\'style\', \'text-align: right\');\n\t\topening_cell.innerHTML = "";\n\t\topening_cell.appendChild(input_opening_text);\n\t\t\t\n\t}\n\t\tdocument.getElementById("Confirm_edit").disabled = false;\t\n\n}\n\n\nfunction CalcKeyCode(aChar) {\n  var character = aChar.substring(0,1);\n  var code = aChar.charCodeAt(0);\n  return code;\n}\n\nfunction checkNumber(val) {\n  var strPass = val.value;\n  var strLength = strPass.length;\n  var lchar = val.value.charAt((strLength) - 1);\n  var cCode = CalcKeyCode(lchar);\n\n  /* Check if the keyed in character is a number\n     do you want alphabetic UPPERCASE only ?\n     or lower case only just check their respective\n     codes and replace the 48 and 57 */\n\n  if (cCode < 43 || cCode > 57 ) {\n    var myNumber = val.value.substring(0, (strLength) - 1);\n    val.value = myNumber;\n  }\n  return false;\n}\n\tfunction autocomplete_code()// function for autocomplition of account code while searching account by accountcode\n\t{\n\t\tvar code_sel = document.getElementById(\'accountcode_search\').value;\n\t\tdocument.getElementById(\'accountcode_search\').value = code_sel.capitalize();\n\t\tvar acc_search = document.getElementById(\'accountcode_search\').value;\n\t\tvar data1;\n\t\t$.ajax({\n\t\ttype: "POST",\n\t\turl: location.protocol+"//"+location.host+"/account/getAccountCodeListByCode",//url to get all list of code defination\n\t\tdataType: "json",\n\t\tasync:false,\n\t\tdata: {\'suggest_acc_code\':acc_search},//send the request data \n\t\tsuccess: function(data) {\n\t\t\tvar account_list = data["list_of_code"];\n\t\t\tif(data["list_of_code"].length >0) \n\t\t\t{\t\n\t\t\t\tvar array= 0;\t\n\t\t\t\t\n\t\t\t\tfor (var i=0;i<account_list.length;i++)\n\t\t\t\t{\t\n\t\t\t\t\tarray+= ":"+account_list[i];\n\t\t\t\t}\n\t\t\t\tdata1 = array.split(":");\n\t\t\t\t\n\t\t\t\t$("#accountcode_search").autocomplete(data1);\n\t\t\t}\n\t    \t}\n\t});\n\t}\n\t\nfunction changeCase(frmObj)\n{\nvar index;\nvar tmpStr;\nvar tmpChar;\nvar preString;\nvar postString;\nvar strlen;\ntmpStr = frmObj.value.toLowerCase();\nstrLen = tmpStr.length;\nif (strLen > 0)  {\nfor (index = 0; index < strLen; index++)  {\nif (index == 0)  {\ntmpChar = tmpStr.substring(0,1).toUpperCase();\npostString = tmpStr.substring(1,strLen);\ntmpStr = tmpChar + postString;\n}\nelse {\ntmpChar = tmpStr.substring(index, index+1);\nif (tmpChar == " " && index < (strLen-1))  {\ntmpChar = tmpStr.substring(index+1, index+2).toUpperCase();\npreString = tmpStr.substring(0, index+1);\npostString = tmpStr.substring(index+2,strLen);\ntmpStr = preString + tmpChar + postString;\n         }\n      }\n   }\n}\nfrmObj.value = tmpStr;\nreturn frmObj.value;\n}\n\nfunction Empty_Span()\n{\n$("#subgroup_warning").empty();\n$("#acc_warning").empty();\n$("#account_warning").empty(); \n$("#edit_warning").empty();\n$(\'#new_acc_warning\').empty();\t\n$(\'#Balance_edit_warning\').empty();\n$("#code_warning").empty();\n$("#existcode_warning").empty();\n}\n//]]>\n</script>\n<script type="text/javascript">\n/*Function to select entire amount when pressed enter key*/\nfunction SelectAll(id)\n{\n    document.getElementById(id).focus();\n    document.getElementById(id).select();\n}\n</script>\n<script>\n/* Function for Enter key to move to next field*/ \nfunction keydown(e,s){\n\tif (!e) var e = window.event;\n\tif (e.keyCode) code = e.keyCode;\n\telse if (e.which) code = e.which;\n\tif (code==13){\n\t\tdocument.getElementById(s).focus();\n\t}\n}\n</script>\n\n<script>\n/* Function to go from subgroupname to groupname by Up arrow */ \nfunction subgrptogrp()\n{\n\tvar x=document.getElementById("subgroupname").selectedIndex;\n\tvar y=document.getElementById("subgroupname").options;\n\tif(y[x].index==0){\n\tif (code==38){\n\t\tdocument.getElementById(\'groupname\').focus();\n\t}\n   }\n\n}\n</script>\n<script>\n/* Function to go from search account by to accountname & account code by Down arrow*/ \nfunction searchtoaccname()\n{\n\tvar x=document.getElementById("searchacc_by").selectedIndex;\n\tvar y=document.getElementById("searchacc_by").options;\n\tif(y[x].index==2){\n\t\tif (code==13){\n\t\t\tdocument.getElementById(\'account_name\').focus();\n\t\t}\n        }\n\telse{\n\t\tif (code==13){\n\t\t\tdocument.getElementById(\'accountcode_search\').focus();\n\t        }\n        }\n\n}\n</script>\n<script>\n/* Function for Down arrow to move to next field*/ \nfunction keydowns(e,s){\n\tif (!e) var e = window.event;\n\tif (e.keyCode) code = e.keyCode;\n\telse if (e.which) code = e.which;\n\tif (code==40){\n\t\tdocument.getElementById(s).focus();\n\t}\n}\n</script>\n\n<script>\n/* Function to go from accountname to search account by Up arrow*/ \nfunction accnametosearch()\n{\n\tvar x=document.getElementById("account_name").selectedIndex;\n\tvar y=document.getElementById("account_name").options;\n\tif(y[x].index==0){\n\t\tif (code==38){\n\t\t\tdocument.getElementById(\'searchacc_by\').focus();\n\t        }\n        }\n\n}\n</script>\n\n<script>\n//create a function that accepts an input variable (which key was key pressed)\nfunction disableEnterKey(e)\n{\n \n//create a variable to hold the number of the key that was pressed     \n\tvar key;\n\n\t//if the users browser is internet explorer\n\tif(window.event)\n\t{\n\t\t//store the key code (Key number) of the pressed key\n\t\tkey = window.event.keyCode;\n\n\t//otherwise, it is firefox\n\t} \n\telse \n\t{\n\t\t//store the key code (Key number) of the pressed key\n\t\tkey = e.which;     \n\t}\n\n\t//if key 13 is pressed (the enter key)\n\tif(key == 13)\n\t{\n\t\t//do nothing\n\t\treturn false;\n\t      \n    //otherwise\n    \t} \n\telse \n\t{\n      \n\t    //continue as normal (allow the key press for keys other than "enter")\n\t    return true;\n    \t}\n      \n\t//and don\'t forget to close the function    \n\t\n\tkeydown(e,s);\n}\n</script>\n<script>\n/* Function for Up arrow to move to previous field*/ \nfunction keyup(e,s){\n\tif (!e) var e = window.event;\n\tif (e.keyCode) code = e.keyCode;\n\telse if (e.which) code = e.which;\n\tif (code==38){\n\t\tdocument.getElementById(s).focus();\n\t}\n}\n</script>\n</div>\n<h3 align= "center"><font size=4>previous = \u21e7, nextbutton = \u21e9, next = enter, checkbox = space</h3>\n<ul class="tabs" style="text-align:left;" >\n\t<li><a href="#tab1"><em>Add New Account</em></a></li>\n\t<li><a href="#tab2"><em>Find/Edit Accounts</em></a><br></li><br><br>\n</ul>  \n<div class="tab_container">\n<div id="tab1" class="tab_content">\n<form id="account" method = "post" action=')
        # SOURCE LINE 1220
        __M_writer(escape(h.url_for(controller='account',action='setAccount')))
        __M_writer(u' onclick = Empty_Span(); name = "account" onsubmit="return validate(account)" >\n<fieldset>\n<legend><label for ="Add New Account"><b>Enter New Account Details</b></label></legend>\n<input type="hidden" name = "acc_code" id="acc_code" value = "')
        # SOURCE LINE 1223
        __M_writer(escape(c.flag))
        __M_writer(u'">\n<input type="hidden" name = "accountcode_suggestion" id="accountcode_suggestion">\n\n\n<input type="hidden" name = "listcode" id="listcode">\n<table width="100%" height ="50%" border="1">\n<tr>\n\n<td width="75%">\n\t<table>\n\t\t<tr><td colspan="3">&nbsp;<span id="account_warning" style="color:#2B2FA4;"></span></lable><span id="subgroup_warning" style="color:#2B2FA4;"></span></td></tr>\n\t\t<tr><td colspan="3"><span id="code_warning" style="color:#2B2FA4;"></span></td></tr>\n\t\t<tr>\n\t\t\t<td width="5%">&nbsp;</td>\n\t\t\t<td width="8%"><label for="groupname" id="groupname_lbl">Group Name:</label></td>\n\t\t\t<td width="30%"><select id="groupname" name="groupname" onkeyup="keydown(event,\'subgroupname\')">\n\t\t\t\t<option >Please Choose Group Name</option>\n')
        # SOURCE LINE 1240
        for grp in c.groups:
            # SOURCE LINE 1241
            __M_writer(u'\t\t\t\t\t\t<option>')
            __M_writer(escape(grp))
            __M_writer(u'</option>\n')
            pass
        # SOURCE LINE 1243
        __M_writer(u'\t\t\t\t</select>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<td></td>\n\t\t\t<td><label for="subgroupname" id="subgroupname_lbl">Sub-Group Name:</label></td>\n\t\t\t<td><select id="subgroupname" name="subgroupname" onkeyup="subgrptogrp()" onkeypress="keydown(event,\'accountname\')" onBlur="this.form.newSub.focus()" onChange="this.form.accountname.focus()">\n\t\t\t\t<option></option>\n\t\t\t\t</select>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td></td>\n\t\t\t<td><label for="newSub" id="newSub_lbl" name="newSub_lbl" hidden=true>New Sub-Group Name:</label>\n\t\t\t<td><input type="text" id="newSub" name="newSub" class="Required1" onblur="change_case()" onkeyup="keyup(event,\'subgroupname\')" onkeypress="keydown(event,\'accountname\')" onKeydown="return disableEnterKey(event)"  onKeypress= Empty_Span();  />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr><td colspan="3"></td></tr>\n\t\t<tr>\n\t\t\t<td></td>\n\t\t\t<td><label for="accountname" id="accountname_lbl">Account Name:</label></td>\n\t\t\t<td><input type="text" onKeydown="return disableEnterKey(event)"  id="accountname" name="accountname" class="Required1" onblur="change_case()" onkeypress="keydown(event,\'save\')" \nonBlur="this.form.openingbalance.focus()" onChange="this.form.openingbalance.focus()"  onkeyup="keyup(event,\'subgroupname\')"  onKeypress = Empty_Span();><span id= "acc_warning" style="color:Red"></span></td>\n\t\t</tr>\n\t\t<tr><td colspan="3"></td></tr>\n')
        # SOURCE LINE 1269
        if (c.flag == "manually"):
            # SOURCE LINE 1270
            __M_writer(u'\t\t\t<tr>\n\t\t\t\t<td></td>\n\t\t\t\t<td><label for="suggest_acc_code" id="suggest_acc_code_lbl">Account Code:</label></td>\n\t\t\t\t<td><input type="text" id="suggest_acc_code" onKeydown="return disableEnterKey(event)"   name="suggest_acc_code" class="Required1" onkeyup="keyup(event,\'accountname\')" onKeypress= "keydown(event,\'save\')" /></td>\n\t\t\t</tr>\n\t\t\t<tr><td colspan="2"><span></span></td>\n\t\t\t<td colspan="1"><span id="existcode_warning" style="color:Red"></span></td></tr>\n')
            pass
        # SOURCE LINE 1278
        __M_writer(u'\n\t\t<tr>\n\t\t\t<td></td>\n\t\t\t<td><label for="balance" id="openingbalance_lbl"> Opening Balance&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;\u20b9</label></td>\n\t\t\t<td><input type="text" id="openingbalance" name="openingbalance" style="text-align: right"  value="0.00" onKeypress="checkNumber(document.getElementById(\'openingbalance\'))" onfocus="SelectAll(\'openingbalance\');" class="Required1"  onKeyup= "keyup(event,\'accountname\')"  /></td>\n\t\t</tr>\n\t\t<tr><td colspan="3"></td></tr>\n\t\t<tr>\n\t\t\t<td></td>\n\t\t\t<td>&nbsp;</td>\n\t\t\t<td><input type="submit" name="save" onkeyup="keyup(event,\'accountname\')" onkeypress="keyup(event,\'openingbalance\')" value="Save" size="6" id="save" src="/images/button.png" disabled=true;>&nbsp;&nbsp;&nbsp;<input type="reset" value="Reset" size="6" id="clearall" onclick="$(\'#groupname\').focus()" src="/images/button.png"/></td>\n\n\t\t</tr>\n\t</table>\n</td>\n<td>\n\t<table>\n\t<tr>\n\t\t<td>Total Debit Opening Balance</td>\n\t</tr>\n\t<tr>\n\t\t<td><input readonly="readonly" value = \u20b9')
        # SOURCE LINE 1299
        __M_writer(escape(c.total_drbal))
        __M_writer(u' style="text-align: right;"></td>\n\t</tr>\n\t<tr>\n\t\t<td>Total Credit Opening Balance</td>\n\t</tr>\n\t<tr>\n\t\t<td><input readonly="readonly" value = \u20b9')
        # SOURCE LINE 1305
        __M_writer(escape(c.total_crbal))
        __M_writer(u' style="text-align: right;"></td>\n\t<tr>\n\t</tr>\n\t\t<td>Difference in Opening Balances</td>\n\t</tr>\n\t<tr>\n\t\t<td><input readonly="readonly" value = \u20b9')
        # SOURCE LINE 1311
        __M_writer(escape(c.diff_bal))
        __M_writer(u' style="text-align: right;"></td>\n\t</tr>\n\t</table>\n</td>\n</tr>\n</table>\n</fieldset>\n</form>\n</div>\n\n<div id="table_div"></div>\n<div id="tab2" class="tab_content" hidden="true" >\n<form id="edit_account" method = "post" action=')
        # SOURCE LINE 1323
        __M_writer(escape(h.url_for(controller='account',action='editAccount')))
        __M_writer(u' onclick =Empty_Span(); onkeyup= Empty_Span(); onsubmit="return Validate_Account_Edit()"  >\n<fieldset id="fieldset">\n<legend><td colspan="2"><b>Editing of Accounts</b></td></legend><br><br>\n<table width="100%" border="1">\n<tr>\n<td width="75%">\n\t<table border="0" align="center"> \n')
        # SOURCE LINE 1330
        if c.flag == "manually":
            # SOURCE LINE 1331
            __M_writer(u'\t<tr>\n\t\t<td colspan="1"><label for="searchacc_by" id="label_searchacc_by">&nbsp;&nbsp;&nbsp;&nbsp;<font size = "3">Search Account By: </label></td>\n\t\t<td colspan="2">\n\t\t\t<select id="searchacc_by" name="searchacc_by" onkeypress="searchtoaccname()">\n\t\t\t\t<option>--Please Select--</option>\n\t\t\t\t<option>Account Code </option>\n\t\t\t\t<option>Account Name </option>\n\t\t\t</select>\n\t\t</td>\n\t\t\n\t</tr>\n')
            pass
        # SOURCE LINE 1343
        if c.flag == "automatic":
            # SOURCE LINE 1344
            __M_writer(u'\t<tr>\n\t\t<td width="20%"><label for="account_name" id="account_name_lbl" >&nbsp;&nbsp;&nbsp;&nbsp;<font size="3">Account Name :</font></label></td>\n\t\t<td><select id="account_name" onkeypress="accnametosearch()" onkeydown="keydown(event,\'account_name\')" onkeyup="keyup(event,\'searchacc_by\')" name="account_name" class="Required1">\n')
            # SOURCE LINE 1347
            if c.accnames == []:
                # SOURCE LINE 1348
                __M_writer(u'\t\t\t<option>No Account Name to Display</option>\n')
                # SOURCE LINE 1349
            else:
                # SOURCE LINE 1350
                __M_writer(u'\t\t\t<option>Please Choose Account Name</option>\n')
                # SOURCE LINE 1351
                for s in c.accnames:
                    # SOURCE LINE 1352
                    __M_writer(u'\t\t\t\t<option>')
                    __M_writer(escape(s))
                    __M_writer(u'</option>\n')
                    pass
                pass
            # SOURCE LINE 1355
            __M_writer(u'\t\t</select></td>\n\t\t<td width="20%"><input type="button" id="search" onkeyup="keyup(event,\'account_name\')" value="Search" onkeydown="keyup(event,\'accountcode_search\')" src="/images/button.png"></td>\n\t\n\t</tr> \n')
            pass
        # SOURCE LINE 1360
        if c.flag == "manually":
            # SOURCE LINE 1361
            __M_writer(u'\t<tr>\n\t\t<td width="20%"><label for="account_name" id="account_name_lbl" >&nbsp;&nbsp;&nbsp;&nbsp;<font size="3">Account Name:</font></label></td>\n\t\t<td><select id="account_name" onkeypress="accnametosearch()" onkeydown="keydown(event,\'search\')" name="account_name" class="Required1">\n')
            # SOURCE LINE 1364
            if c.accnames == []:
                # SOURCE LINE 1365
                __M_writer(u'\t\t\t<option>No Account Name to Display</option>\n')
                # SOURCE LINE 1366
            else:
                # SOURCE LINE 1367
                __M_writer(u'\t\t\t<option>Please Choose Account Name</option>\n')
                # SOURCE LINE 1368
                for s in c.accnames:
                    # SOURCE LINE 1369
                    __M_writer(u'\t\t\t\t<option>')
                    __M_writer(escape(s))
                    __M_writer(u'</option>\n')
                    pass
                pass
            # SOURCE LINE 1372
            __M_writer(u'\t\t</select></td>\n\t\t<td width="20%"></td>\n\t\n\t</tr> \n\t<tr>\n\t\t<td width="20%"><label for="accountcode_search" id="accountcode_lbl" >&nbsp;&nbsp;&nbsp;&nbsp;<font size="3">Account Code:</font></label></td>\n\t\t<td width="30%"><input type="text" id="accountcode_search"  onKeydown="return disableEnterKey(event)" onkeypress="keydown(event,\'search\')" onkeyup="keyup(event,\'searchacc_by\')" name="accountcode_search" class="Required1" onkeypress ="autocomplete_code()"></td>\n\t\t<td width="20%"><input type="button" id="search" value="Search" onkeyup="keyup(event,\'account_name\')" value="Search" onkeydown="keyup(event,\'accountcode_search\')" src="/images/button.png"></td>\n\t</tr>\n')
            pass
        # SOURCE LINE 1382
        __M_writer(u'\t<tr>\n\t\t<td colspan="3" align="center">&nbsp;<span id="new_acc_warning" onkeyup="keyup(event,\'searchacc_by\')" style="color:#6A0909;"></span><span id="edit_warning" style="color:#B42B2B;">&nbsp;</span></td>\n\t</tr>\n\t<tr>\n\t\t<td colspan="3" align="center"><span id="Balance_edit_warning" onkeyup="keyup(event,\'searchacc_by\')" style="color:#B42B2B;">&nbsp;</span></td>\n\t</tr>\n\t<tr>\n\t\t<td colspan="3">\n\t\t\n\t\t\t<center>\n\t\t\t<table border="1" id="acc_table" width="80%" class="change"> \n\t\t\t<tr align="center"> \n\t\t\t\t<td>Account Code</td>\n\t\t\t\t<td>Group Name</td>\n\t\t\t\t<td>Sub-Group Name</td>\n\t\t\t\t<td>Account Name</td> \n\t\t\t\t<td>Opening Balance Amount &nbsp;\u20b9</td> \n\t\t\t\t<td>Action</td>\n\t\t\t</tr> \n\t\t\t</table>\n\t\t\t</center>\n\t\t</td>\n\t\n\t</tr><br> \n\t<tr>\n\t\t<td colspan="3" align="center"><input type="submit" id="Confirm_edit" onkeyup="keyup(event,\'searchacc_by\')"  value="Confirm" src="/images/button.png" disabled= true;></td>\n\t\t\n\t\t<td colspan="3" align="left"><input type="button" id="Delete" value="Delete" src="/images/button.png" disabled= false;></td>\n\t</tr>\n</tr>\n</table>\n</td>\n<td width = "25%">\n\t<table>\n\t<tr>\n\t\t<td>Total Debit Opening Balance</td>\n\t</tr>\n\t<tr>\n\t\t<td><input readonly="readonly" value = \u20b9')
        # SOURCE LINE 1420
        __M_writer(escape(c.total_drbal))
        __M_writer(u' style="text-align: right;"></td>\n\t</tr>\n\t<tr>\n\t\t<td>Total Credit Opening Balance</td>\n\t</tr>\n\t<tr>\n\t\t<td><input readonly="readonly" value = \u20b9')
        # SOURCE LINE 1426
        __M_writer(escape(c.total_crbal))
        __M_writer(u' style="text-align: right;"></td>\n\t<tr>\n\t</tr>\n\t\t<td>Difference in Opening Balances</td>\n\t</tr>\n\t<tr>\n\t\t<td><input readonly="readonly" value = \u20b9')
        # SOURCE LINE 1432
        __M_writer(escape(c.diff_bal))
        __M_writer(u' style="text-align: right;"></td>\n\t</tr>\n\t</table>\n</td>\n</tr>\n</table>\n</table>\n\t<input type="hidden" id="group_name" name="groupname" >\n\t<input type="hidden" id="subgroup_name" name="subgroupname">\n\t<input type="hidden" name = "account_code" id="account_code">\n\t<input type="hidden" name = "Balance" id="Balance">\n\t<input type="hidden" name = "oldacc_name" id="oldacc_name">\n\t<input type="hidden" name = "Openingbalance" id="Openingbalance">\n\t<input type="hidden" name = "array" id="array">\n\t<input type="hidden" name = "acccode" id="acccode" value = "')
        # SOURCE LINE 1446
        __M_writer(escape(c.flag))
        __M_writer(u'">\n</fieldset> \n</form>\n</div>\n</div>\n')
        return ''
    finally:
        context.caller_stack._pop_frame()


